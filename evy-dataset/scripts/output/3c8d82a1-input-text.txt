Find the number of paths with a given maximum weight and length in a graph