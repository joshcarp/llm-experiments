
func removeDuplicates:num nums:[]num
    if nums == []
        return 0
    end
    length := len nums
    result := 0
    i := 0
    j := 0
    while i < length
        j = i
        while j < length
            if nums[j] != nums[i]
                break
            end
            j = j + 1
        end
        if j - i > 2
            length = length - (j - i - 2)
            for k := range (j - i - 2)
                nums = nums[:i] + nums[i + 1:]
            end
            result = result + 2
            j = i + 2
        else
            result = result + (j - i)
        end
        i = j
    end
    return result
end

func test
    assert 2 (removeDuplicates [1 1 1 2 2 3])
    assert 5 (removeDuplicates [0 0 1 1 1 1 2 3 3])
    assert 2 (removeDuplicates [1 1 1 2])
    assert 0 (removeDuplicates [])
end
test
