
func lengthLongestPath:num input:string
    if input == ""
        return 0
    end
    lines := split input "\n"
    lastLevelLen := [0] * (len lines + 1)
    maxLen := 0
    for line := range lines
        level := 0
        for i := range line
            if line[i] == "\t"
                level = level + 1
            end
        end
        curLen := lastLevelLen[level + 1] = lastLevelLen[level] + (len line) - level + 1
        if (contains line ".")
            maxLen = max maxLen (curLen - 1)
        end
    end
    return maxLen
end

func contains:bool haystack:string needle:string
    for i := range ((len haystack) - (len needle) + 1)
        if haystack[i:i + (len needle)] == needle
            return true
        end
    end
    return false
end

func test
    s := lengthLongestPath "dir\n    file.txt"
    print s
end
test
// output:
//line 7 column 38: unexpected whitespace before "+"
//line 7 column 38: "len" takes 1 argument, found 0
//line 7 column 38: expected ")", got "+"
//line 7 column 38: invalid inferred declaration for "lastLevelLen"
//line 9 column 9: invalid declaration of "line", already used as function name
//line 11 column 24: function call must be parenthesized: (line ...)
//line 11 column 28: range cannot be empty
//line 12 column 21: unknown variable name "i"
//line 12 column 22: "line" takes 2 arguments, found 0
//line 12 column 22: expected end of line, found "]"
//line 12 column 16: expected condition of type bool, found none
//line 8 column 5: "maxLen" declared but not used
//line 15 column 9: missing return
//line 16 column 19: unknown variable name "lastLevelLen"
//line 16 column 31: invalid inferred declaration for "curLen"
//line 17 column 22: function call must be parenthesized: (line ...)
//line 17 column 27: "contains" takes 2 arguments, found 0
//line 17 column 27: expected ")", got ""
//line 18 column 13: unknown variable name "maxLen"
//line 18 column 13: at least one statement is required here
//line 20 column 5: unexpected input "end"
//line 21 column 12: unknown variable name "maxLen"
//line 21 column 12: return statement not allowed here
//line 22 column 1: unexpected input "end"
//line 23 column 1: unreachable code
//line 32 column 1: unreachable code
//line 37 column 1: unreachable code
