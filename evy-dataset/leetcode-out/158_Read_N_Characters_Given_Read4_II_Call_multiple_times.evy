
func Solution:{}any
    self:{}any
    self.buff := ["" "" "" ""]
    self.offset := 0
    self.bufsize := 0
    return self
end

func read self:{}any buf:[]string n:num
    pos := 0
    eof := false
    while !(eof) and pos < n
        if self.bufsize == 0
            self.bufsize = read4 self.buff
            eof = self.bufsize < 4
        end
        byte := min (n - pos) self.bufsize
        for i := range 0 byte
            buf[pos + i] = self.buff[self.offset + i]
        end
        self.offset = (self.offset + byte) % 4
        self.bufsize = self.bufsize - byte
        pos = pos + byte
    end
    return pos
end

func test
    // Test cases for read4 are not provided, so we cannot test the read function.
end
test
// output:
//line 10 column 1: cannot override builtin function "read"
