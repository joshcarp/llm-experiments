
func ListNode:{}any
    self:{}any
    self.val = 0
    self.next = {}
    return self
end

func Solution:{}any
    self:{}any
    return self
end

func partition self:{}any head:{}any x:num
    if head == {}
        return head
    end
    less := {}
    lesshead := {}
    last := head
    pos := head
    while pos != {}
        if pos.val < x
            if lesshead == {}
                lesshead = pos
            else
                less.next = pos
            end
            less = pos
            if head == pos
                last = head
                head = pos.next
            else
                last.next = pos.next
            end
        else
            last = pos
        end
        pos = pos.next
    end
    if lesshead != {}
        less.next = head
    else
        lesshead = head
    end
    return lesshead
end

func test
    head := (ListNode)
    head.val = 1
    head.next = (ListNode)
    head.next.val = 4
    head.next.next = (ListNode)
    head.next.next.val = 3
    head.next.next.next = (ListNode)
    head.next.next.next.val = 2
    head.next.next.next.next = (ListNode)
    head.next.next.next.next.val = 5
    head.next.next.next.next.next = (ListNode)
    head.next.next.next.next.next.val = 2
    sol := (Solution)
    newHead := partition sol head 3
    assert 1 (newHead.val)
    assert 2 (newHead.next.val)
    assert 2 (newHead.next.next.val)
    assert 1 (newHead.next.next.next.val)
    assert 4 (newHead.next.next.next.next.val)
    assert 3 (newHead.next.next.next.next.next.val)
    assert 5 (newHead.next.next.next.next.next.next.val)
end
test
