
func singleNumber:num nums:[]num
    res := 0
    for num := range nums
        res = res ^ num
    end
    return res
end

func test
    assert 1 (singleNumber [2 2 1])
    assert 4 (singleNumber [4 1 2 1 2])
end
test
```

The issue was that Evy doesn't use the `^` operator for XOR. Instead, you should use the `xor` function. Here's the corrected code:

```evy
func singleNumber:num nums:[]num
    res := 0
    for num := range nums
        res = xor res num
    end
    return res
end

func test
    assert 1 (singleNumber [2 2 1])
    assert 4 (singleNumber [4 1 2 1 2])
end
test
